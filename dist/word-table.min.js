!function(t,n){"function"==typeof define&&define.amd?define(["word-width"],n):"object"==typeof module&&module.exports?module.exports=n(require("word-width")):t.WordTable=n(t.WordWidth)}(this,function(t){return function(n,o){function e(t,n){var o,e="";for(o=0;o<t;o++)e+=n;return e}function r(n,o,e){c=Math.max(o+1,c),d.length<=o&&d.push(0);for(var r=t(e);p.length<=n;)p.push([]);p[n].length<=o?p[n].push(r):p[n][o]=r,d[o]=Math.max(r,d[o])}function i(){s=tableBody.concat(),s.splice(0,0,y),d=[],c=0;var t,n,o,e,i=s.length;for(t=0;t<i;t++)for(o=s[t],e=o.length,n=0;n<e;n++)r(t,n,o[n])}function u(t){var n,o,r="+";for(n=0;n<c;n++)o=d[n]+2*t[n],r+=e(o,"-"),r+="+";return r}function f(t,n,o){var r,i,u,f,h="|",a=t.length;for(r=0;r<c;r++)r>=a?(h+=e(d[r]+2*n[r]," "),h+="|"):(i=(d[r]-p[o][r])/2,u=Math.floor(i),f=Math.ceil(i),h+=e(n[r]+u," "),h+=t[r],h+=e(n[r]+f," "),h+="|");return h}function h(){var t,n=[],o=s.length;for(t=0;t<c;t++)n.push(Math.ceil(d[t]/4));var e=u(n);for(a=[e],t=0;t<o;t++)a.push(f(s[t],n,t)),a.push(e)}var a,d,c,s,l=!0,p=[],y=n||[];tableBody=o||[],this.string=function(){return this.array().join("\n")},this.array=function(){if(l){if(i(),h(),0===c)return[];l=!1}return a},this.setHeader=function(t){y=t||[],l=!0},this.appendBody=function(t){tableBody.push(t),l=!0},this.setBody=function(t){tableBody=t,l=!0},this.reset=function(){l=!0,y=[],tableBody=[]}}});